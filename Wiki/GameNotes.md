# Game Notes
Here's a collection of notes that have been written for various games that might help to provide some insight into the generation process & any problems you almost certainly will be having.

## Deep Rock Galactic
Modkit generated by Buckminsterfullerene
```
Before generating in editor:
1. Use umodel command to extract all psk/psa (skeletal mesh/animation sequence) files
2. Use 3ds max to convert psk/psa to fbx - can semi-automate using batch export script
3. Copy fbx files into JSON output and serialize skeletal meshes so that they get model hash 
4. Serialize all assets except cooked

Order to generate in editor:
1. Textures
2. Materials
3. StaticMeshes
4. Skeletons
5. SkeletalMeshes
6. Run rename/make/delete physics assets python script to match list
7. Regenerate SkeletalMeshes (to fix physics asset references)
8. Cooked assets
9. Sound cues (must be in-editor)
10. Manually import animation sequences
11. Run the JSON for anim sequences to fix notifies - make sure refresh if OFF
12. Select every anim sequence right click -> save (so that fixed notifies persist permanently)
13. Animation Montages
14. Animation Blueprints
15. Everything else
16. Make sure sound classes + sub mixes are connected
17. Copy in correct fonts

Figure out how to serialize SkeletonRig assets -> do they need to be used for skeletal meshes?

Why do certain vanity headwear assets not have skeleton assigned in them? (e.g. /Game/Characters/Vanity2/Headwear/SK_Vanity_Headwear_HelmetCyclops01.json)

JSON that needs to be edited to add skeleton manually:
- /Game/Characters/Vanity2/Headwear/SK_Vanity_Headwear_HelmetCyclops01.json (need to copy and paste skeleton in editor, then set the skeleton in JSON to that)
- /Game/Characters/Vanity2/Headwear/SK_Vanity_Headwear_HelmetDwarfClassic02.json (3P_Dwarf_Rig_Skeleton)
- /Game/Characters/Vanity2/Headwear/SK_Vanity_Headwear_HelmetDwarfClassic03.json (3P_Dwarf_Rig_Skeleton)
- /Game/Characters/Vanity2/Headwear/SK_Vanity_Headwear_HelmetHardhatRadio.json (3P_Dwarf_Rig_Skeleton)

Figure out why /Game/GameElements/Objectives/Escort/DrillDozer/Animations/ANIM_DrillDozer_Doretta_Riding_Idle.fbx/the looking around ones are being generated with 18 tracks even though JSON says it only has 15
Solution to fix: add 3 more bone tracks to JSON (so that it goes up to 18)

Need to populate TrackToSkeletonMapTable in AnimSequences so that the length always matches the max number of "BoneTreeIndex" values in the JSON
Temp solution to fix: add missing tracks in JSON

Figure out why many ABPs with an assigned skeleton crashes editor

Figure out why some float properties within curve vectors are not being serialized correctly

Figure out why some BehaviourTree assets crash on opening but others don't - seems to be tied to whether or not they have a blackboard generated, but sometime not??

Check if maybe anim sequences can now be generated using model hash now?
```

## Astro Colony
Modkit generated by Buckminsterfullerene
```
F:\AC Modding\UnrealPacker4.27\JSON\Assets/Game/Blueprints/BP_GameInstance.json

Figure out why:
- Meshes/Visual/SM_VisualBush 
- _Assets/ZeroGravityPartOne/Meshes/Props/SM_Instrument_Panel_01
- _Assets/ZeroGravityPartOne/Meshes/Props/SM_Pipe_Padded
(and more) are not exporting (via UModel/FBX export)

So little audio that can just put cooked assets into github repo

Game/Meshes/Shapes/Shape_Cone (SM) even cooked causes crash - delete for now

Seems like only Sitting4 and GuyTyping are the two anim sequences that need to be dummied, rest seem to be fine as cooked

Some widgets don't compile due to "internal component error - <name of item> cannot be made because of /Script/<name> already exists" - seems to be to do with transient/instanced (for fucks sake) flags being wrong in headers again

In AssetTypeGenerator.cpp
bool UAssetTypeGenerator::IsDumbAsset()
{
	if (GetClass()->GetName() == "AnimBlueprintGenerator"
		|| GetClass()->GetName() == "BlendSpaceGenerator"
		|| GetAssetName() == L"BP_CinematicScifiGuy"
		//&& GetAssetName() == L"ScifiGuySkeleton"
		&& bSkipAnim)
	{
		UE_LOG(LogAssetGenerator, Warning, TEXT("Skipping asset %s"), *GetAssetName().ToString());
		return true;
	}
	return false;
}
```